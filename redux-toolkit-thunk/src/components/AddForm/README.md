[На главную](../../../README.md)

# AddForm.js
AddForm.js - это React компонент, который обрабатывает добавление новых элементов в набор данных для голосования.

## Содержание
- [Описание](#Описание)
- [Сторонние библиотеки](#Сторонние-библиотеки)
- [Логика компонента](#Логика-компонента)
- [Пример использования](#Пример-использования)
- [Примеры кода](#Примеры-кода)

## Описание
Этот компонент отрисовывает форму добавления новых вариантов для голосования. Вы можете ввести данные в текстовое поле и нажать кнопку "Добавить на голосование".

## Сторонние библиотеки
- `React`, `useState` - основная библиотека для создания пользовательских интерфейсов и использования локального состояния;
- `useDispatch`, `useSelector` - React Hooks из библиотеки `react-redux`, позволяющие соединяться с Redux Store;
- `selectIsStarted` - селектор из Redux Store, который возвращает состояние `isStarted`, указывающее, начато ли текущее голосование;
- `postItem` - функция `thunk`, которая отвечает за добавление новой записи в наш Redux Store и отправку данных на сервер;
- `disableError` - вспомогательная функция для отключения ошибок ввода.

## Логика компонента
На основе состояния `isStarted` отображается либо форма ввода, либо компонент `<Start />`.

При сабмите формы, функция `handleSubmit` проверяет значение `item`. Если `item` является пустой строкой, вспомогательная функция `disableError` вызывается для установки состояния ошибки и прерывает выполнение `handleSubmit`. Если `item` содержит данные, запись добавляется в список голосования путем вызова `postItem`.

Стейт `error` используется для отображения ошибок ввода, если поле ввода пустое.

## Пример использования
Для использования этого компонента в вашем приложении достаточно просто его импортировать и указать в нужном месте:

```jsx
import { AddForm } from './AddForm/AddForm';

function App() {
  return (
    <div className="App">
      <AddForm />
    </div>
  );
}

export default App;
```
Теперь форма доступна для добавления элементов.

## Примеры кода

### dispatch и thunk
Если вам нужно отправить async запрос с использованием thunk, вы можете это сделать, вызвав функцию dispatch:

```jsx
dispatch(postItem(item));
```
В этом случае `postItem` - это функция, которая делает асинхронное действие (отправляет запрос), и затем диспатчит другие действия в зависимости от того, успешно ли выполнено действие.

### useState hook
С помощью хука `useState` мы можем создать два состояния: `item` и `error`. Это локальные состояния компонента:

```jsx
const [item, setItem] = useState('');
const [error, setError] = useState('');
```
`item` содержит введенный пользователем текст, а `error` хранит сообщение об ошибке, если таковая имеется.

### Элементы формы и обработка событий
Далее в компоненте присутствуют элементы формы, такие как инпут и кнопка. Они обрабатывают события ввода пользователя и сабмит формы соответственно:
```jsx
<input
  className={`input ${error}`}
  type="text"
  value={item}
  onChange={({ target }) => setItem(target.value.trim())}
/>
<button className="button" type="submit">
  Добавить
</button>
```

В целом, при использовании данного компонента важно убедиться в наличии всех необходимых Dependencies (useDispatch, useSelector, postItem, и т.п.) и корректности их работы.

---

Если возникнут проблемы или вопросы по использованию этого компонента, не стесняйтесь обращаться в поддержку.

## Обратите внимание

Все API-запросы в этом компоненте направлены на `http://localhost:3001/api/**`. Если ваш сервер работает на другом домене или порту, вам будет необходимо обновить эту настройку.